var FTPUPLOAD={init:function(){this.uploadAllEvent(),this.uploadEvents(),this.createFolderEvents(),this.compareEvents(),this.getDir("")},getDir:function(a){a={dir:a};$.ajax({url:ADMIN_PATH+"/ftpu-get-dir",data:a,success:function(a){"ok"==a.get_dir.response?($(".upload-ftp-dir-content").html(a.get_dir.html),$(".ftp-dir").on("click",function(){var a,e,p;$(this).hasClass("disabled")||(a=$(".folder").attr("folder"),p=$(this).attr("name"),$(this).hasClass("no-existe")?(e=$(this).attr("id-folder"),$("#popup-upload-ftp-create-id-folder").val(e),$("#popup-upload-ftp-create-folder").html(a),$("#popup-upload-ftp-create-name").html(p),$("#popup-upload-ftp-create").addClass("active")):(p=a+"/"+p,$(".ftp-dir").addClass("disabled"),$(".ftp-file").addClass("disabled"),FTPUPLOAD.getDir(p)))}),$(".ftp-file").on("click",function(){var a,e,p,t,o;$(this).hasClass("disabled")||(a=$(this).attr("id-file"),e=$(".folder").attr("folder"),p=$(this).find(".name").attr("name"),t=$(this).find(".size").attr("size"),o=$(this).find(".size").attr("ftp_size"),$("#popup-upload-ftp-id-file").val(a),$("#popup-upload-ftp-folder").html(e),$("#popup-upload-ftp-name").html(p),$("#popup-upload-ftp-size").html(t+" bytes"),-1==o?($("#popup-upload-ftp-ftp-size").html("No existe"),$("#btn-upload-ftp-comparar").addClass("hidden")):($("#popup-upload-ftp-ftp-size").html(o+" bytes"),$("#btn-upload-ftp-comparar").removeClass("hidden")),$("#popup-upload-ftp").addClass("active"))})):($(".ftp-dir").removeClass("disabled active"),$(".ftp-file").removeClass("disabled"),HIVE.showInfo("Uups",a.get_dir.mensaje))}})},uploadAllEvent:function(){$("#btn-upload-all").off().on("click",function(){var a,e,p,t=$(this);t.hasClass("disabled")||(t.addClass("disabled"),a=[],e=[],$(".upload-ftp-dir-content .ftp-file.warning").each(function(){a.push($(this).find(".name").attr("name")),e.push($(this).attr("id-file"))}),0!=a.length?($(".ftp-dir").addClass("disabled"),$(".ftp-file").addClass("disabled"),p={folder:$(".folder").attr("folder"),files:a},$.ajax({url:ADMIN_PATH+"/ftpu-upload-all",data:p,success:function(a){if("ok"==a.result.response){for(i=0;i<e.length;i++)$(".upload-ftp-dir-content").find('.ftp-file[id-file="'+e[i]+'"]').removeClass("warning no-existe");HIVE.showInfo("Completo",a.result.mensaje)}else HIVE.showInfo("Uups",a.result.mensaje);t.removeClass("disabled"),$(".ftp-dir").removeClass("disabled"),$(".ftp-file").removeClass("disabled")}})):t.removeClass("disabled"))})},uploadEvents:function(){$("#btn-upload-ftp").on("click",function(){var p=$(this),a={folder:$("#popup-upload-ftp-folder").html(),file:$("#popup-upload-ftp-name").html()};p.hasClass("disabled")||(p.addClass("disabled"),$.ajax({url:ADMIN_PATH+"/ftpu-upload",data:a,success:function(a){var e;"ok"==a.upload.response?(e=$("#popup-upload-ftp-id-file").val(),$(".upload-ftp-dir-content").find('.ftp-file[id-file="'+e+'"]').removeClass("warning no-existe"),$("#popup-upload-ftp").removeClass("active"),HIVE.showInfo("Completo",a.upload.mensaje)):HIVE.showInfo("Uups",a.upload.mensaje),p.removeClass("disabled")}}))}),$("#btn-upload-ftp-close").on("click",function(){$("#popup-upload-ftp").removeClass("active")})},createFolderEvents:function(){$("#btn-upload-ftp-create").on("click",function(){var p=this,a={folder:$("#popup-upload-ftp-create-folder").html(),name:$("#popup-upload-ftp-create-name").html()};$(this).hasClass("disabled")||($(this).addClass("disabled"),$.ajax({url:ADMIN_PATH+"/ftpu-create-folder",data:a,success:function(a){var e;"ok"==a.folder.response?(e=$("#popup-upload-ftp-create-id-folder").val(),$(".upload-ftp-dir-content").find('.ftp-dir[id-folder="'+e+'"]').removeClass("no-existe"),$("#popup-upload-ftp-create").removeClass("active"),HIVE.showInfo("Completo",a.folder.mensaje)):HIVE.showInfo("Uups",a.folder.mensaje),$(p).removeClass("disabled")}}))}),$("#btn-upload-ftp-create-close").on("click",function(){$("#popup-upload-ftp-create").removeClass("active")})},compareEvents:function(){$("#btn-upload-ftp-comparar").on("click",function(){var p=this,a={folder:$("#popup-upload-ftp-folder").html(),file:$("#popup-upload-ftp-name").html()};$(this).hasClass("disabled")||($(this).addClass("disabled"),$.ajax({url:ADMIN_PATH+"/ftpu-compare",data:a,success:function(a){var e;"ok"==a.compare.response?(e=$("#popup-upload-ftp-comparar .content").height()-150,$("#popup-upload-ftp-comparar").find("textarea").css("height",e),$("#popup-upload-ftp-comparar-code-server").val(a.compare.code_server),$("#popup-upload-ftp-comparar-code-ftp").val(a.compare.code_ftp),$("#popup-upload-ftp").removeClass("active"),$("#popup-upload-ftp-comparar").addClass("active")):HIVE.showInfo("Uups",a.compare.mensaje),$(p).removeClass("disabled")}}))}),$("#btn-upload-ftp-comparar-close").on("click",function(){$("#popup-upload-ftp-comparar").removeClass("active"),$("#popup-upload-ftp").addClass("active")})}};$(window).ready(function(){FTPUPLOAD.init()});