var APP={init:function(){this.acceptCookiesEvent(),this.sendNewsletterEvent(),this.sendLoginEvent(),this.sendRegisterEvent(),this.chooseLanguageEvent()},acceptCookiesEvent:function(){$("#btn-acepta-cookies").off().on("click",function(){var s=$(this);s.hasClass("disabled")||(s.addClass("disabled"),$.ajax({url:PUBLIC_PATH+"/set-cookies",data:{dato:!0},success:function(e){"ok"==e.cookie.response?(s.addClass("btn-ok"),$("#popup-cookies").removeClass("active")):(HIVE.showInfo("Error","An unexpected error has occurred.<br>Reload the page to try again."),s.removeClass("disabled"))}}))})},sendNewsletterEvent:function(){$("#btn-send-newsletter").off().on("click",function(){var s=$(this),e={email:$("#input-send-newsletter").val().trim()};$(".newsletter-content *").removeClass("error"),HIVE.validate("email",e.email)||$("#input-send-newsletter").addClass("error"),null==$("#checkbox-send-newsletter:checked").val()&&$("#checkbox-send-newsletter").addClass("error"),s.hasClass("disabled")||0!=$(".newsletter-content .error").length||(s.addClass("disabled"),$.ajax({url:PUBLIC_PATH+"/save-newsletter",data:e,success:function(e){"ok"==e.newsletter.response?(s.addClass("btn-ok"),HIVE.showInfo(e.newsletter.title,e.newsletter.description)):(HIVE.showInfo("Error","An unexpected error has occurred.<br>Reload the page to try again."),s.removeClass("disabled"))}}))})},sendLoginEvent:function(){$("#btn-send-login").on("click",function(){var s=$(this),e={email:$("#input-login-email").val().trim(),pass:$("#input-login-pass").val().trim(),remember:null==$("#checkbox-login-remember:checked").val()?0:1};$(".login-content *").removeClass("error"),HIVE.validate("email",e.email)||$("#input-login-email").addClass("error"),(""==e.pass||e.pass.length<8)&&$("#input-login-pass").addClass("error"),s.hasClass("disabled")||0!=$(".login-content .error").length||(s.addClass("disabled"),$.ajax({url:PUBLIC_PATH+"/login-send",data:e,success:function(e){"ok"==e.login.response?(s.addClass("btn-ok"),window.location.href=e.login.url):(HIVE.showInfo("Uups",e.login.mensaje),s.removeClass("disabled"))}}))})},sendRegisterEvent:function(){$("#btn-send-register").on("click",function(){var s=$(this),e={email:$("#input-register-email").val().trim(),name:$("#input-register-name").val().trim(),lastname:$("#input-register-lastname").val().trim(),pass1:$("#input-register-pass-1").val().trim(),pass2:$("#input-register-pass-2").val().trim(),newsletter:null==$("#checkbox-register-newsletter:checked").val()?0:1};$(".register-content *").removeClass("error"),HIVE.validate("email",e.email)||$("#input-register-email").addClass("error"),HIVE.validate("name",e.name)||$("#input-register-name").addClass("error"),HIVE.validate("lastname",e.lastname)||$("#input-register-lastname").addClass("error"),(""==e.pass1||e.pass1.length<8)&&$("#input-register-pass-1").addClass("error"),(""==e.pass2||e.pass2.length<8)&&$("#input-register-pass-2").addClass("error"),e.pass1!=e.pass2&&$("#input-register-pass-2").addClass("error"),null==$("#checkbox-register-accept:checked").val()&&$("#checkbox-register-accept").addClass("error"),s.hasClass("disabled")||0!=$(".register-content .error").length||(s.addClass("disabled"),$.ajax({url:PUBLIC_PATH+"/register-send",data:e,success:function(e){"ok"==e.register.response?(s.addClass("btn-ok"),window.location.href=e.register.url):(HIVE.showInfo("Uups",e.register.mensaje),s.removeClass("disabled"))}}))})},chooseLanguageEvent:function(){$("#select-choose-language").on("change",function(){var s=$(this),a={language:$(this).val(),route:ROUTE,language_route:$("option:selected",this).attr("route")};s.hasClass("disabled")||(s.addClass("disabled"),s.prop("disabled",!0),$.ajax({url:PUBLIC_PATH+"/choose-language",data:a,success:function(e){"ok"==e.language.response?window.location.href=""==a.language_route?e.language.route:e.language.language_route:(s.prop("disabled",!1),s.removeClass("disabled"))}}))})}};$(window).ready(function(){APP.init()});