/**
 * @author Diego Martín
 * @copyright Hive®
 * @version 1.0
 * @lastUpdated 2025
 */
var APP={init:function(){this.acceptCookiesEvent(),this.sendNewsletterEvent(),this.sendLoginEvent(),this.sendRegisterEvent(),this.chooseLanguageEvent()},acceptCookiesEvent:function(){$("#btn-acepta-cookies").off().on("click",(function(){var e=$(this);e.hasClass("disabled")||(e.addClass("disabled"),$.ajax({url:PUBLIC_PATH+"/set-cookies",data:{dato:!0},success:function(s){"ok"==s.cookie.response?(e.addClass("btn-ok"),$("#popup-cookies").removeClass("active")):(UTILS.showInfo("Error","An unexpected error has occurred.<br>Reload the page to try again."),e.removeClass("disabled"))}}))}))},sendNewsletterEvent:function(){$("#btn-send-newsletter").off().on("click",(function(){var e=$(this),s={email:$("#input-send-newsletter").val().trim()};$(".newsletter-content *").removeClass("error"),UTILS.validate("email",s.email)||$("#input-send-newsletter").addClass("error"),null==$("#checkbox-send-newsletter:checked").val()&&$("#checkbox-send-newsletter").addClass("error"),e.hasClass("disabled")||0!=$(".newsletter-content .error").length||(e.addClass("disabled"),$.ajax({url:PUBLIC_PATH+"/save-newsletter",data:s,success:function(s){"ok"==s.newsletter.response?(e.addClass("btn-ok"),UTILS.showInfo(s.newsletter.title,s.newsletter.description)):(UTILS.showInfo("Error","An unexpected error has occurred.<br>Reload the page to try again."),e.removeClass("disabled"))}}))}))},sendLoginEvent:function(){$("#btn-send-login").on("click",(function(){var e=$(this),s={email:$("#input-login-email").val().trim(),pass:$("#input-login-pass").val().trim(),remember:null==$("#checkbox-login-remember:checked").val()?0:1};$(".login-content *").removeClass("error"),UTILS.validate("email",s.email)||$("#input-login-email").addClass("error"),(""==s.pass||s.pass.length<8)&&$("#input-login-pass").addClass("error"),e.hasClass("disabled")||0!=$(".login-content .error").length||(e.addClass("disabled"),$.ajax({url:PUBLIC_PATH+"/login-send",data:s,success:function(s){"ok"==s.login.response?(e.addClass("btn-ok"),window.location.href=s.login.url):(UTILS.showInfo("Uups",s.login.message),e.removeClass("disabled"))}}))}))},sendRegisterEvent:function(){$("#btn-send-register").on("click",(function(){var e=$(this),s={email:$("#input-register-email").val().trim(),name:$("#input-register-name").val().trim(),lastname:$("#input-register-lastname").val().trim(),pass1:$("#input-register-pass-1").val().trim(),pass2:$("#input-register-pass-2").val().trim(),newsletter:null==$("#checkbox-register-newsletter:checked").val()?0:1};$(".register-content *").removeClass("error"),UTILS.validate("email",s.email)||$("#input-register-email").addClass("error"),UTILS.validate("name",s.name)||$("#input-register-name").addClass("error"),UTILS.validate("lastname",s.lastname)||$("#input-register-lastname").addClass("error"),(""==s.pass1||s.pass1.length<8)&&$("#input-register-pass-1").addClass("error"),(""==s.pass2||s.pass2.length<8)&&$("#input-register-pass-2").addClass("error"),s.pass1!=s.pass2&&$("#input-register-pass-2").addClass("error"),null==$("#checkbox-register-accept:checked").val()&&$("#checkbox-register-accept").addClass("error"),e.hasClass("disabled")||0!=$(".register-content .error").length||(e.addClass("disabled"),$.ajax({url:PUBLIC_PATH+"/register-send",data:s,success:function(s){"ok"==s.register.response?(e.addClass("btn-ok"),window.location.href=s.register.url):(UTILS.showInfo("Uups",s.register.message),e.removeClass("disabled"))}}))}))},chooseLanguageEvent:function(){$("#select-choose-language").on("change",(function(){var e=$(this),s=$("option:selected",this).attr("route"),a={language:$(this).val()};e.hasClass("disabled")||(e.addClass("disabled"),e.prop("disabled",!0),$.ajax({url:PUBLIC_PATH+"/choose-language",data:a,success:function(a){"ok"==a.language.response?window.location.href=s:(e.prop("disabled",!1),e.removeClass("disabled"))}}))}))}};$(window).ready((function(){APP.init()}));